/**
 * jsOnlyLightbox 0.5.6
 * Copyright Â© 2014 Felix Hagspiel - http://jslightbox.felixhagspiel.de
 *
 * @license MIT
 * - Free for use in both personal and commercial projects
 */
function Lightbox(){function e(){return window.innerHeight||document.documentElement.offsetHeight}function t(){return window.innerWidth||document.documentElement.offsetWidth}function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t){if(e&&t)return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function i(e,t){if(e&&t)return e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)"),""),e}function r(e,t){if(e&&t)return o(e,t)||(e.className+=" "+t),e}function a(e){return void 0!==e}function l(e,t){return!(!e||!a(e))&&(e.getAttribute?n=e.getAttribute(t):e.getAttributeNode&&(n=e.getAttributeNode(t).value),!(!a(n)||""===n)&&n);var n}function c(e,t){return!(!e||!a(e))&&(e.getAttribute?n=e.getAttribute(t):e.getAttributeNode&&(n=e.getAttributeNode(t).value),"string"==typeof n);var n}function u(e){n(e,"click",function(t){s(t),d(t),O=l(e,j+"-group")||!1,R=e,w(e,!1,!1,!1)},!1)}function s(e){e.stopPropagation?e.stopPropagation():e.returnValue=!1}function d(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function m(e){for(var t=[],n=0;n<T.thumbnails.length;n++)l(T.thumbnails[n],j+"-group")===e&&t.push(T.thumbnails[n]);return t}function p(e,t){for(var n=m(t),o=0;o<n.length;o++)if(l(e,"src")===l(n[o],"src")&&l(e,j+"-index")===l(n[o],j+"-index")&&l(e,j)===l(n[o],j))return o}function f(){if(O){var e=new Image,t=new Image,n=p(R,O);n===B.length-1?(e.src=l(B[B.length-1],j)||B[B.length-1].src,t.src=l(B[0].src,j)||B[0].src):0===n?(e.src=l(B[B.length-1],j)||B[B.length-1].src,t.src=l(B[1],j)||B[1].src):(e.src=l(B[n-1],j)||B[n-1].src,t.src=l(B[n+1],j)||B[n+1].src)}}function b(){D||(h(),E=setTimeout(function(){if(r(T.box,L+"-loading"),!q&&"number"==typeof T.opt.loadingAnimation){var e=0;x=setInterval(function(){r(_[e],L+"-active"),setTimeout(function(){i(_[e],L+"-active")},T.opt.loadingAnimation),e=e>=_.length?0:e+=1},T.opt.loadingAnimation)}},500))}function h(){if(!D&&(i(T.box,L+"-loading"),!q&&"string"!=typeof T.opt.loadingAnimation&&T.opt.loadingAnimation)){clearInterval(x);for(var e=0;e<_.length;e++)i(_[e],L+"-active")}}function v(){if(!F){if(r(F=document.createElement("span"),L+"-next"),T.opt.nextImg){var e=document.createElement("img");e.setAttribute("src",T.opt.nextImg),F.appendChild(e)}else r(F,L+"-no-img");n(F,"click",function(e){s(e),T.next()},!1),T.box.appendChild(F)}if(r(F,L+"-active"),!z){if(r(z=document.createElement("span"),L+"-prev"),T.opt.prevImg){var t=document.createElement("img");t.setAttribute("src",T.opt.prevImg),z.appendChild(t)}else r(z,L+"-no-img");n(z,"click",function(e){s(e),T.prev()},!1),T.box.appendChild(z)}r(z,L+"-active")}function g(){if(T.opt.responsive&&F&&z){var t=e()/2-F.offsetHeight/2;F.style.top=t+"px",z.style.top=t+"px"}}function y(e){function t(e){return"boolean"!=typeof e||e}if(e||(e={}),T.opt={boxId:e.boxId||!1,controls:t(e.controls),dimensions:t(e.dimensions),captions:t(e.captions),prevImg:"string"==typeof e.prevImg&&e.prevImg,nextImg:"string"==typeof e.nextImg&&e.nextImg,hideCloseBtn:e.hideCloseBtn||!1,closeOnClick:"boolean"!=typeof e.closeOnClick||e.closeOnClick,nextOnClick:t(e.nextOnClick),loadingAnimation:e.loadingAnimation===undefined||e.loadingAnimation,animElCount:e.animElCount||4,preload:t(e.preload),carousel:t(e.carousel),animation:"number"==typeof e.animation||!1===e.animation?e.animation:400,responsive:t(e.responsive),maxImgSize:e.maxImgSize||.8,keyControls:t(e.keyControls),hideOverflow:e.hideOverflow||!0,onopen:e.onopen||!1,onclose:e.onclose||!1,onload:e.onload||!1,onresize:e.onresize||!1,onloaderror:e.onloaderror||!1,onimageclick:"function"==typeof e.onimageclick&&e.onimageclick},T.opt.boxId){T.box=document.getElementById(T.opt.boxId);var o=T.box.getAttribute("class");o.search(L+" ")<0&&T.box.setAttribute("class",o+" "+L)}else if(!T.box){var a=document.getElementById(I);a||(a=document.createElement("div")),a.setAttribute("id",I),a.setAttribute("class",L),T.box=a,M.appendChild(T.box)}if(T.box.innerHTML=N,D&&r(T.box,L+"-ie8"),T.wrapper=document.getElementById(I+"-contentwrapper"),!T.opt.hideCloseBtn){var l=document.createElement("span");l.setAttribute("id",I+"-close"),l.setAttribute("class",L+"-close"),l.innerHTML="X",T.box.appendChild(l),n(l,"click",function(e){s(e),T.close()},!1)}if(!D&&T.opt.closeOnClick&&n(T.box,"click",function(e){s(e),T.close()},!1),"string"==typeof T.opt.loadingAnimation)(S=document.createElement("img")).setAttribute("src",T.opt.loadingAnimation),r(S,L+"-loading-animation"),T.box.appendChild(S);else if(T.opt.loadingAnimation){T.opt.loadingAnimation="number"==typeof T.opt.loadingAnimation?T.opt.loadingAnimation:200,r(S=document.createElement("div"),L+"-loading-animation");for(var c=0;c<T.opt.animElCount;)_.push(S.appendChild(document.createElement("span"))),c++;T.box.appendChild(S)}T.opt.responsive?(n(window,"resize",function(){T.resize()},!1),r(T.box,L+"-nooverflow")):i(T.box,L+"-nooverflow"),T.opt.keyControls&&n(document,"keydown",function(e){V&&(s(e),39===e.keyCode?T.next():37===e.keyCode?T.prev():27===e.keyCode&&T.close())},!1)}function w(e,t,i,c){if(!e&&!t)return!1;var u;(O=t||O||l(e,j+"-group"))&&(B=m(O),"boolean"!=typeof e||e||(e=B[0])),P.img=new Image,R=e,u="string"==typeof e?e:l(e,j)?l(e,j):l(e,"src"),H=!1,V||("number"==typeof T.opt.animation&&r(P.img,L+"-animate-transition "+L+"-animate-init"),V=!0,T.opt.onopen&&T.opt.onopen(P)),T.opt&&a(T.opt.hideOverflow)&&!T.opt.hideOverflow||M.setAttribute("style","overflow: hidden"),T.box.setAttribute("style","padding-top: 0"),T.wrapper.innerHTML="",T.wrapper.appendChild(P.img),T.opt.animation&&r(T.wrapper,L+"-animate");var d=l(e,j+"-caption");if(d&&T.opt.captions){var p=document.createElement("p");p.setAttribute("class",L+"-caption"),p.innerHTML=d,T.wrapper.appendChild(p)}r(T.box,L+"-active"),D&&r(T.wrapper,L+"-active"),T.opt.controls&&B.length>1&&(v(),g()),P.img.onerror=function(e){T.opt.onloaderror&&(e._happenedWhile=c||!1,T.opt.onloaderror(e))},P.img.onload=function(){if(P.originalWidth=this.naturalWidth||this.width,P.originalHeight=this.naturalHeight||this.height,D||q){var e=new Image;e.setAttribute("src",u),P.originalWidth=e.width,P.originalHeight=e.height}var t=setInterval(function(){o(T.box,L+"-active")&&(r(T.wrapper,L+"-wrapper-active"),"number"==typeof T.opt.animation&&r(P.img,L+"-animate-transition"),i&&i(),h(),clearTimeout(E),T.opt.preload&&f(),T.opt.nextOnClick&&(r(P.img,L+"-next-on-click"),n(P.img,"click",function(e){s(e),T.next()},!1)),T.opt.onimageclick&&n(P.img,"click",function(e){s(e),T.opt.onimageclick(P)},!1),T.opt.onload&&T.opt.onload(c),clearInterval(t),T.resize())},10)},P.img.setAttribute("src",u),b()}var S,x,E,k,C,A="jslghtbx",L=A,I=A,j="data-"+A,T=this,D=!1,q=!1,M=document.getElementsByTagName("body")[0],N='<div class="'+A+'-contentwrapper" id="'+A+'-contentwrapper" ></div>',H=!1,O=!1,R=!1,P={},B=[],V=!1,_=[],F=!1,z=!1;T.opt={},T.box=!1,T.wrapper=!1,T.thumbnails=[],T.thumbnails.push=function(){for(var e=0,t=arguments.length;e<t;e++)u(arguments[e]);return Array.prototype.push.apply(this,arguments)},T.load=function(e){navigator.appVersion.indexOf("MSIE 8")>0&&(D=!0),navigator.appVersion.indexOf("MSIE 9")>0&&(q=!0),y(e);for(var t=document.querySelectorAll("["+j+"]"),n=0;n<t.length;n++)c(t[n],j)&&(t[n].setAttribute(j+"-index",n),T.thumbnails.push(t[n]))},T.open=function(e,t){e&&t&&(t=!1),w(e,t,!1,!1)},T.resize=function(){if(P.img){t(),e();var n=T.box.offsetWidth,o=T.box.offsetHeight;!H&&P.img&&P.img.offsetWidth&&P.img.offsetHeight&&(H=P.img.offsetWidth/P.img.offsetHeight),Math.floor(n/H)>o?(k=o*H,C=o):(k=n,C=n/H),k=Math.floor(k*T.opt.maxImgSize),C=Math.floor(C*T.opt.maxImgSize),(T.opt.dimensions&&C>P.originalHeight||T.opt.dimensions&&k>P.originalWidth)&&(C=P.originalHeight,k=P.originalWidth),P.img.setAttribute("width",k),P.img.setAttribute("height",C),P.img.setAttribute("style","margin-top:"+(e()-C)/2+"px"),setTimeout(g,200),T.opt.onresize&&T.opt.onresize(P)}},T.next=function(){if(O){var e=p(R,O)+1;if(B[e])R=B[e];else{if(!T.opt.carousel)return;R=B[0]}"number"==typeof T.opt.animation?(i(P.img,L+"-animating-next"),setTimeout(function(){w(R,!1,function(){setTimeout(function(){r(P.img,L+"-animating-next")},T.opt.animation/2)},"next")},T.opt.animation/2)):w(R,!1,!1,"next")}},T.prev=function(){if(O){var e=p(R,O)-1;if(B[e])R=B[e];else{if(!T.opt.carousel)return;R=B[B.length-1]}"number"==typeof T.opt.animation?(i(P.img,L+"-animating-prev"),setTimeout(function(){w(R,!1,function(){setTimeout(function(){r(P.img,L+"-animating-next")},T.opt.animation/2)},"prev")},T.opt.animation/2)):w(R,!1,!1,"prev")}},T.close=function(){O=!1,R=!1;var e=P;P={},B=[],V=!1,i(T.box,L+"-active"),i(T.wrapper,L+"-wrapper-active"),i(F,L+"-active"),i(z,L+"-active"),T.box.setAttribute("style","padding-top: 0px"),h(),D&&T.box.setAttribute("style","display: none"),T.opt&&a(T.opt.hideOverflow)&&!T.opt.hideOverflow||M.setAttribute("style","overflow: auto"),T.opt.onclose&&T.opt.onclose(e)}}function getTampermonkey(){return new Promise(function(e,t){window.external&&window.external.Tampermonkey?e(window.external.Tampermonkey):t("Tampermonkey is not installed.")})}function getViolentmonkey(){return new Promise(function(e,t){window.external&&window.external.Violentmonkey?e(window.external.Violentmonkey):t("Violentmonkey is not installed.")})}function getInstalledVersion(e,t){return new Promise(function(n,o){getTampermonkey().then(function(o){o.isInstalled(e,t,function(e){e.installed?n(e.version):n(null)})},function(){getViolentmonkey().then(function(o){o.isInstalled(e,t).then(n)},o)})})}function compareVersions(e,t){if(e==t)return 0;for(var n=e.split("."),o=t.split("."),i=0;i<n.length;i++){var r=compareVersionPart(n[i],o[i]);if(0!=r)return r}return 0}function compareVersionPart(e,t){for(var n=parseVersionPart(e),o=parseVersionPart(t),i=0;i<n.length;i++){if(n[i].length>0&&0==o[i].length)return-1;if(0==n[i].length&&o[i].length>0)return 1;if(n[i]>o[i])return 1;if(n[i]<o[i])return-1}return 0}function parseVersionPart(e){if(!e)return[0,"",0,""];var t=/([0-9]*)([^0-9]*)([0-9]*)([^0-9]*)/.exec(e);return[t[1]?parseInt(t[1]):0,t[2],t[3]?parseInt(t[3]):0,t[4]]}function checkForUpdates(e,t){var n=e.getAttribute("data-script-name"),o=e.getAttribute("data-script-namespace"),i=e.getAttribute("data-script-version");getInstalledVersion(n,o).then(function(t){if(null!=t)switch(compareVersions(t,i)){case-1:e.textContent=e.getAttribute("data-update-label");break;case 1:e.textContent=e.getAttribute("data-downgrade-label");break;case 0:e.textContent=e.getAttribute("data-reinstall-label")}},function(){t&&setTimeout(function(){checkForUpdates(e,!1)},1e3)})["catch"](function(){})}function markupPreview(e){function t(e){return document.querySelectorAll('input[type=radio][name="'+e.getAttribute("data-markup-option-name")+'"]')}function n(e){for(;e&&-1==e.className.indexOf("previewable");)e=e.parentNode;return e}function o(e){return e.querySelector("textarea")}function i(e){return e.querySelector(".preview-results")}function r(e){return e.querySelector(".preview-tab").className.indexOf("current")>-1}function a(e){var t=n(e.target);r(t)||(l(t),e.preventDefault())}function l(e){t(e);var n=e.closest("form").querySelector('input[name="'+e.getAttribute("data-markup-option-name")+'"]:checked').value,i="url"==e.getAttribute("data-preview-source"),r=new XMLHttpRequest;r.onload=function(){c(e,r.responseText)},r.onerror=function(){c(e,r.status)},r.open("POST","/preview-markup");var a=new FormData;a.append("text",o(e).value),a.append("markup",n),a.append("url",i),a.append(document.querySelector("meta[name='csrf-param']").getAttribute("content"),document.querySelector("meta[name='csrf-token']").getAttribute("content")),r.send(a)}function c(e,t){var n=o(e),r=i(e);r.innerHTML=t,"none"!=n.style.display&&(r.style.height=n.clientHeight+"px",r.style.display="block",n.style.display="none",d(e,!0))}function u(e){var t=n(e.target),r=o(t);i(t).style.display="none",r.style.display="block",d(t,!1)}function s(e){r(e)&&l(e)}function d(e,t){e.querySelector(t?".preview-tab":".write-tab").parentNode.classList.add("current"),e.querySelector(t?".write-tab":".preview-tab").parentNode.classList.remove("current")}var m=document.createElement("div");m.className="tabs",m.innerHTML="<span class='current'><a class='write-tab'><span>"+e.getAttribute("data-write-label")+"</span></a></span> <span><a class='preview-tab'><span>"+e.getAttribute("data-preview-label")+"</span></a></span>",e.insertBefore(m,e.firstChild);var p=document.createElement("div");p.className="preview-results user-content",p.style.display="none",e.appendChild(p),e.querySelector(".preview-tab").addEventListener("click",a),e.querySelector(".write-tab").addEventListener("click",u),Array.prototype.forEach.call(document.querySelectorAll('input[name="'+e.getAttribute("data-markup-option-name")+'"]'),function(t){t.addEventListener("change",function(){s(e)})})}(function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var t=e.Rails;(function(){(function(){var e;e=null,t.loadCSPNonce=function(){var t;return e=null!=(t=document.querySelector("meta[name=csp-nonce]"))?t.content:void 0},t.cspNonce=function(){return null!=e?e:t.loadCSPNonce()}}).call(this),function(){var e,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,t.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},e="_ujsData",t.getData=function(t,n){var o;return null!=(o=t[e])?o[n]:void 0},t.setData=function(t,n,o){return null==t[e]&&(t[e]={}),t[e][n]=o},t.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}.call(this),function(){var e,n,o;e=t.$,o=t.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=t.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},t.CSRFProtection=function(e){var t;if(null!=(t=o()))return e.setRequestHeader("X-CSRF-Token",t)},t.refreshCSRFTokens=function(){var t,i;if(i=o(),t=n(),null!=i&&null!=t)return e('form input[name="'+t+'"]').forEach(function(e){return e.value=i})}}.call(this),function(){var e,n,o,i;o=t.matches,"function"!=typeof(e=window.CustomEvent)&&((e=function(e,t){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype,i=e.prototype.preventDefault,e.prototype.preventDefault=function(){var e;return e=i.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),e}),n=t.fire=function(t,n,o){var i;return i=new e(n,{bubbles:!0,cancelable:!0,detail:o}),t.dispatchEvent(i),!i.defaultPrevented},t.stopEverything=function(e){return n(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.delegate=function(e,t,n,i){return e.addEventListener(n,function(e){var n;for(n=e.target;n instanceof Element&&!o(n,t);)n=n.parentNode;if(n instanceof Element&&!1===i.call(n,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var e,n,o,i,r,a;i=t.cspNonce,n=t.CSRFProtection,t.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},t.ajax=function(e){var t;return e=r(e),t=o(e,function(){var n,o;return o=a(null!=(n=t.response)?n:t.responseText,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(o,t.statusText,t):"function"==typeof e.error&&e.error(o,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0}),!(null!=e.beforeSend&&!e.beforeSend(t,e))&&(t.readyState===XMLHttpRequest.OPENED?t.send(e.data):void 0)},r=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},o=function(e,t){var o;return(o=new XMLHttpRequest).open(e.type,e.url,!0),o.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(o)),o.withCredentials=!!e.withCredentials,o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)return t(o)},o},a=function(e,t){var n,o;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(r){}else if(t.match(/\b(?:java|ecma)script\b/))(o=document.createElement("script")).setAttribute("nonce",i()),o.text=e,document.head.appendChild(o).parentNode.removeChild(o);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(r){}}return e},t.href=function(e){return e.href},t.isCrossDomain=function(e){var t,n;(t=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(o){return o,!0}}}.call(this),function(){var e,n;e=t.matches,n=function(e){return Array.prototype.slice.call(e)},t.serializeElement=function(t,o){var i,r;return i=[t],e(t,"form")&&(i=n(t.elements)),r=[],i.forEach(function(t){if(t.name&&!t.disabled&&!e(t,"fieldset[disabled] *"))return e(t,"select")?n(t.options).forEach(function(e){if(e.selected)return r.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?r.push({name:t.name,value:t.value}):void 0}),o&&r.push(o),r.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},t.formElements=function(t,o){return e(t,"form")?n(t.elements).filter(function(t){return e(t,o)}):n(t.querySelectorAll(o))}}.call(this),function(){var e,n,o;n=t.fire,o=t.stopEverything,t.handleConfirm=function(t){if(!e(this))return o(t)},t.confirm=function(e){return confirm(e)},e=function(e){var o,i,r;if(!(r=e.getAttribute("data-confirm")))return!0;if(o=!1,n(e,"confirm")){try{o=t.confirm(r,e)}catch(a){}i=n(e,"confirm:complete",[o])}return o&&i}}.call(this),function(){var e,n,o,i,r,a,l,c,u,s,d,m;s=t.matches,c=t.getData,d=t.setData,m=t.stopEverything,l=t.formElements,t.handleDisabledElement=function(e){if(this.disabled)return m(e)},t.enableElement=function(e){var n;if(e instanceof Event){if(u(e))return;n=e.target}else n=e;return s(n,t.linkDisableSelector)?a(n):s(n,t.buttonDisableSelector)||s(n,t.formEnableSelector)?i(n):s(n,t.formSubmitSelector)?r(n):void 0},t.disableElement=function(i){var r;return r=i instanceof Event?i.target:i,s(r,t.linkDisableSelector)?o(r):s(r,t.buttonDisableSelector)||s(r,t.formDisableSelector)?e(r):s(r,t.formSubmitSelector)?n(r):void 0},o=function(e){var t;if(!c(e,"ujs:disabled"))return null!=(t=e.getAttribute("data-disable-with"))&&(d(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",m),d(e,"ujs:disabled",!0)},a=function(e){var t;return null!=(t=c(e,"ujs:enable-with"))&&(e.innerHTML=t,d(e,"ujs:enable-with",null)),e.removeEventListener("click",m),d(e,"ujs:disabled",null)},n=function(n){return l(n,t.formDisableSelector).forEach(e)},e=function(e){var t;if(!c(e,"ujs:disabled"))return null!=(t=e.getAttribute("data-disable-with"))&&(s(e,"button")?(d(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(d(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,d(e,"ujs:disabled",!0)},r=function(e){return l(e,t.formEnableSelector).forEach(i)},i=function(e){var t;return null!=(t=c(e,"ujs:enable-with"))&&(s(e,"button")?e.innerHTML=t:e.value=t,d(e,"ujs:enable-with",null)),e.disabled=!1,d(e,"ujs:disabled",null)},u=function(e){var t,n;return null!=(null!=(n=null!=(t=e.detail)?t[0]:void 0)?n.getResponseHeader("X-Xhr-Redirect"):void 0)}}.call(this),function(){var e;e=t.stopEverything,t.handleMethod=function(n){var o,i,r,a,l,c,u;if(u=(c=this).getAttribute("data-method"))return l=t.href(c),i=t.csrfToken(),o=t.csrfParam(),r=document.createElement("form"),a="<input name='_method' value='"+u+"' type='hidden' />",null==o||null==i||t.isCrossDomain(l)||(a+="<input name='"+o+"' value='"+i+"' type='hidden' />"),a+='<input type="submit" />',r.method="post",r.action=l,r.target=c.target,r.innerHTML=a,r.style.display="none",document.body.appendChild(r),r.querySelector('[type="submit"]').click(),e(n)}}.call(this),function(){var e,n,o,i,r,a,l,c,u,s=[].slice;a=t.matches,o=t.getData,c=t.setData,n=t.fire,u=t.stopEverything,e=t.ajax,i=t.isCrossDomain,l=t.serializeElement,r=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},t.handleRemote=function(d){var m,p,f,b,h,v,g;return!r(b=this)||(n(b,"ajax:before")?(g=b.getAttribute("data-with-credentials"),f=b.getAttribute("data-type")||"script",a(b,t.formSubmitSelector)?(m=o(b,"ujs:submit-button"),h=o(b,"ujs:submit-button-formmethod")||b.method,v=o(b,"ujs:submit-button-formaction")||b.getAttribute("action")||location.href,"GET"===h.toUpperCase()&&(v=v.replace(/\?.*$/,"")),"multipart/form-data"===b.enctype?(p=new FormData(b),null!=m&&p.append(m.name,m.value)):p=l(b,m),c(b,"ujs:submit-button",null),c(b,"ujs:submit-button-formmethod",null),c(b,"ujs:submit-button-formaction",null)):a(b,t.buttonClickSelector)||a(b,t.inputChangeSelector)?(h=b.getAttribute("data-method"),v=b.getAttribute("data-url"),p=l(b,b.getAttribute("data-params"))):(h=b.getAttribute("data-method"),v=t.href(b),p=b.getAttribute("data-params")),e({type:h||"GET",url:v,data:p,dataType:f,beforeSend:function(e,t){return n(b,"ajax:beforeSend",[e,t])?n(b,"ajax:send",[e]):(n(b,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?s.call(arguments,0):[],n(b,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?s.call(arguments,0):[],n(b,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?s.call(arguments,0):[],n(b,"ajax:complete",e)},crossDomain:i(v),withCredentials:null!=g&&"false"!==g}),u(d)):(n(b,"ajax:stopped"),!1))},t.formSubmitButtonClick=function(){var e,t;if(t=(e=this).form)return e.name&&c(t,"ujs:submit-button",{name:e.name,value:e.value}),c(t,"ujs:formnovalidate-button",e.formNoValidate),c(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),c(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},t.preventInsignificantClick=function(e){var t,n,o,i;if(i=((o=this).getAttribute("data-method")||"GET").toUpperCase(),t=o.getAttribute("data-params"),n=(e.metaKey||e.ctrlKey)&&"GET"===i&&!t,null!=e.button&&0!==e.button||n)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,o,i,r,a,l,c,u,s,d,m,p,f,b;if(a=t.fire,o=t.delegate,c=t.getData,e=t.$,b=t.refreshCSRFTokens,n=t.CSRFProtection,p=t.loadCSPNonce,r=t.enableElement,i=t.disableElement,s=t.handleDisabledElement,u=t.handleConfirm,f=t.preventInsignificantClick,m=t.handleRemote,l=t.formSubmitButtonClick,d=t.handleMethod,"undefined"!=typeof jQuery&&null!==jQuery&&null!=jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=t,jQuery.ajaxPrefilter(function(e,t,o){if(!e.crossDomain)return n(o)})}t.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(t.formEnableSelector).forEach(function(e){if(c(e,"ujs:disabled"))return r(e)}),e(t.linkDisableSelector).forEach(function(e){if(c(e,"ujs:disabled"))return r(e)})}),o(document,t.linkDisableSelector,"ajax:complete",r),o(document,t.linkDisableSelector,"ajax:stopped",r),o(document,t.buttonDisableSelector,"ajax:complete",r),o(document,t.buttonDisableSelector,"ajax:stopped",r),o(document,t.linkClickSelector,"click",f),o(document,t.linkClickSelector,"click",s),o(document,t.linkClickSelector,"click",u),o(document,t.linkClickSelector,"click",i),o(document,t.linkClickSelector,"click",m),o(document,t.linkClickSelector,"click",d),o(document,t.buttonClickSelector,"click",f),o(document,t.buttonClickSelector,"click",s),o(document,t.buttonClickSelector,"click",u),o(document,t.buttonClickSelector,"click",i),o(document,t.buttonClickSelector,"click",m),o(document,t.inputChangeSelector,"change",s),o(document,t.inputChangeSelector,"change",u),o(document,t.inputChangeSelector,"change",m),o(document,t.formSubmitSelector,"submit",s),o(document,t.formSubmitSelector,"submit",u),o(document,t.formSubmitSelector,"submit",m),o(document,t.formSubmitSelector,"submit",function(e){return setTimeout(function(){return i(e)},13)}),o(document,t.formSubmitSelector,"ajax:send",i),o(document,t.formSubmitSelector,"ajax:complete",r),o(document,t.formInputClickSelector,"click",f),o(document,t.formInputClickSelector,"click",s),o(document,t.formInputClickSelector,"click",u),o(document,t.formInputClickSelector,"click",l),document.addEventListener("DOMContentLoaded",b),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===t&&a(document,"rails:attachBindings")&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}).call(this),document.addEventListener("DOMContentLoaded",function(){(new Lightbox).load()}),function(){function e(){function e(e){for(var t=document.querySelectorAll("input[type='checkbox']"),n=0;n<t.length;n++)t[n].checked=e}var t=document.querySelector(".select-all");t&&(t.addEventListener("click",function(t){e(!0),t.preventDefault()}),t.style.display="inline");var n=document.querySelector(".select-none");n&&(n.addEventListener("click",function(t){e(!1),t.preventDefault()}),n.style.display="inline")}function t(){var e=document.getElementById("add-additional-info");e&&e.addEventListener("click",function(t){var n=document.querySelectorAll("textarea[name*='additional_info']"),o=n[n.length-1].id.split("-"),i=parseInt(o[o.length-1],10)+1,r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.open("get","/script_versions/additional_info_form?index="+i),r.onload=function(){var t=document.createElement("div");t.innerHTML=this.responseText;var n=t.firstChild;e.parentNode.parentNode.insertBefore(n,e.parentNode),markupPreview(n.querySelector(".previewable"))},r.send(),t.preventDefault()})}function n(){var e=document.getElementById("add-synced-additional-info");e&&e.addEventListener("click",function(t){var n=document.querySelectorAll("input[type='url'][name*='additional_info_sync']"),o=n[n.length-1].id.split("-"),i=parseInt(o[o.length-1],10)+1,r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.open("get","/scripts/sync_additional_info_form?index="+i),r.onload=function(){var t=document.createElement("div");t.innerHTML=this.responseText,e.parentNode.parentNode.insertBefore(t.children[0],e.parentNode),hookUpMarkupPreview()},r.send(),t.preventDefault()})}function o(){document.getElementById("language-selector-locale").addEventListener("change",function(e){var t=e.target.selectedOptions[0];"help"==t.value?location.href="https://github.com/JasonBarnabe/greasyfork/wiki/Translating-Greasy-Fork":location.href=t.getAttribute("data-language-url")})}function i(){e(),o(),t(),n()}window.addEventListener("DOMContentLoaded",i)}(),function(){function e(e){var t=e.target;if("true"!=t.getAttribute("data-is-previous-version")||confirm(t.getAttribute("data-previous-version-warning"))){var o=new XMLHttpRequest;o.open("POST",e.target.getAttribute("data-ping-url"),!0),o.overrideMimeType("text/plain"),o.send(),setTimeout(function(){location.href=t.href},100),setTimeout(n,2e3),e.preventDefault()}else e.preventDefault()}function t(){document.querySelectorAll(".install-link").forEach(function(t){t.addEventListener("click",e)})}function n(){var e=document.querySelector(".post-install");e&&(e.style.display="flex")}function o(){t()}window.addEventListener("DOMContentLoaded",o)}(),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".install-link");e&&checkForUpdates(e,!0)});var submitInvisibleRecaptchaForm=function(){document.getElementById("new_user").submit()},submitInvisibleRecaptchaFormScriptVersion=function(){document.getElementById("new_script_version").submit()},submitInvisibleRecaptchaFormScriptSet=function(){document.getElementById("save-indicator").value="1",document.getElementById("new_script_set").submit()},submitInvisibleRecaptchaDiscussionForm=function(){document.getElementById("new-discussion").submit()},submitInvisibleRecaptchaScriptDiscussionForm=function(){document.getElementById("new-script-discussion").submit()};window.addEventListener("DOMContentLoaded",function(){Array.prototype.forEach.call(document.querySelectorAll(".previewable"),markupPreview)}),window.addEventListener("DOMContentLoaded",function(){function e(e){var t=e.target.getAttribute("data-related-editor"),n=document.getElementById(t),o=e.target.getAttribute("data-editor-language");if(e.target.checked){n.style.display="none";var r=document.createElement("div");r.id="ace-editor",r.appendChild(document.createTextNode(n.value)),r.style.height=getComputedStyle(n).height,n.parentNode.insertBefore(r,n.nextSibling),(i=ace.edit("ace-editor")).session.on("changeMode",function(e,t){"ace/mode/javascript"===t.getMode().$id&&t.$worker&&t.$worker.send("setOptions",[{"-W064":!1}])}),i.getSession().setMode("ace/mode/"+o)}else{var a=document.getElementById("ace-editor");a&&(n.value=i.getSession().getValue(),n.style.display="block",n.style.height=getComputedStyle(a).height,a.parentNode.removeChild(a),i.destroy(),i=null)}}function t(e){for(;e&&"form"!=e.tagName.toLowerCase();)e=e.parentNode;return e}function n(){if(document.getElementById("ace-editor")){var e=o.getAttribute("data-related-editor");document.getElementById(e).value=i.getSession().getValue()}}var o=document.querySelector("input.enable-source-editor");if(o){var i=null;o.addEventListener("change",e);var r=t(o);r.addEventListener("submit",n);var a=r.querySelector(".g-recaptcha");a&&a.addEventListener("click",n),o.parentNode.style.display="inline",e({target:o})}}),window.addEventListener("DOMContentLoaded",function(){function e(e){for(;e&&"form"!=e.tagName.toLowerCase();)e=e.parentNode;return e}Array.prototype.forEach.call(document.querySelectorAll("[data-submit-anchor]"),function(t){t.addEventListener("click",function(t){var n=e(t.target);null!=n&&n.setAttribute("action",n.getAttribute("action").split("#")[0]+"#"+t.target.getAttribute("data-submit-anchor"))})})}),function(){function e(){function e(e){"auto"==t.style.height||""==t.style.height?(t.style.height=i+"px",r.removeChild(r.firstChild),r.appendChild(document.createTextNode(t.getAttribute("data-show-more-text"))),e&&setTimeout(function(){t.scrollIntoView()},10)):(t.style.height="auto",r.removeChild(r.firstChild),r.appendChild(document.createTextNode(t.getAttribute("data-show-less-text"))))}var t=document.getElementById("script-applies-to");if(t){var n=parseInt(getComputedStyle(t).height,10),o=parseInt(getComputedStyle(t).lineHeight,10)||parseInt(getComputedStyle(t).fontSize,10),i=o*8;if(!(n<=i)){t.style.overflow="hidden",t.parentNode.style.position="relative";var r=document.createElement("span");r.className="expander",r.style.position="absolute",r.style.right="0",r.style.marginTop="-"+o+"px",r.appendChild(document.createTextNode(t.getAttribute("data-show-more-text"))),
r.addEventListener("click",function(){e(!0)}),t.parentNode.appendChild(r),e(!1)}}}window.addEventListener("DOMContentLoaded",e)}(),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".close-sidebar")&&document.querySelector(".close-sidebar").addEventListener("click",function(){document.querySelector(".sidebar").classList.add("collapsed"),document.querySelector(".open-sidebar").classList.add("sidebar-collapsed")}),document.querySelector(".open-sidebar")&&document.querySelector(".open-sidebar").addEventListener("click",function(){document.querySelector(".sidebar").classList.remove("collapsed"),document.querySelector(".open-sidebar").classList.remove("sidebar-collapsed")})}),function(){function e(){var e=document.getElementById("announcement-dismiss");e&&e.addEventListener("ajax:success",function(){var t=e.parentNode;t.parentNode.removeChild(t)})}window.addEventListener("DOMContentLoaded",e)}(),function(){function e(){for(let e of document.querySelectorAll(".edit-comment"))e.addEventListener("click",function(t){t.preventDefault(),document.getElementById(e.getAttribute("data-comment-container")).classList.add("edit-comment-mode")});for(let e of document.querySelectorAll(".cancel-edit-comment"))e.addEventListener("click",function(t){t.preventDefault(),document.getElementById(e.getAttribute("data-comment-container")).classList.remove("edit-comment-mode")});let e=document.querySelector(".discussion-subscribe");e&&e.addEventListener("ajax:success",function(){let e=document.querySelector(".discussion-subscription-links");e.classList.add("discussion-subscribed"),e.classList.remove("discussion-not-subscribed")});let t=document.querySelector(".discussion-unsubscribe");t&&t.addEventListener("ajax:success",function(){let e=document.querySelector(".discussion-subscription-links");e.classList.add("discussion-not-subscribed"),e.classList.remove("discussion-subscribed")})}window.addEventListener("DOMContentLoaded",e)}();