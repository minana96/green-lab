window._bcp=window._bcp||{},window._bcp.engagementRanker=window._bcp.engagementRanker||{},window._bcp.engagementRanker.textRank=function(n,r,e){var t=e||.85,o=r||200,i=[],a=[];function u(r){var e=0;return n[r].in.forEach(function(t){var o=t.index,u=function(r,e){for(var t=0;t<n[r].out.length;t++)if(n[r].out[t].index===e)return n[r].out[t];return null}(o,r);e+=u?u.weight/i[o]*a[o].score:0}),e}n.forEach(function(n,r){i[r]=function(n){var r=0;return n.forEach(function(n){r+=n.weight}),r}(n.out),a[r]={name:n.name,vertex:r,score:Math.random()}});for(var c=0;c<o;++c)for(var f=0;f<n.length;++f){var h=u(f);a[f].score=1-t+t*h}return a.sort(function(n,r){return r.score-n.score}),a},window._bcp.engagementRanker.keyExGraph=function(n,r){var e=[],t={},o=n.length,i=(r||2)/2,a={},u=1;function c(n){return a[n]||(a[n]=u++),a[n]-1}for(var f=0;f<o;++f){var h=n[f];if(h.pos.match(/^[NJ]/)||"ADJ"===h.pos||"CD"===h.pos)for(var p=Math.max(0,f-i),s=Math.min(o,f+i),w=p;w<s;++w)if(f!==w){var g=n[w];if(g.pos.match(/^[NJ]/)||"ADJ"===g.pos||"CD"===g.pos){var m=[h.term,g.term];m.sort(),t[m=m.join("____")]=1}}}for(var v in t){var _=v.split("____");f=c(_[0]),w=c(_[1]),e[f]=e[f]||{me:f,name:_[0],out:[],in:[]},e[w]=e[w]||{me:w,name:_[1],out:[],in:[]},e[f].out.push({index:w,weight:1}),e[f].in.push({index:w,weight:1}),e[w].out.push({index:f,weight:1}),e[w].in.push({index:f,weight:1})}return e};